<project default="build">
	<property name="release" value="0.9.10"/>
	<property name="release-overwrite" value="false"/>

	<property environment="env"/>
	<import file="${env.BROWNIES_DEV}/build-lib.xml" />

    <property name="Brownies-Release.prj" value="Brownies-Collections" />

    <target name="do-build-release" depends="build" />

	<!--
	TODO
	EvalJavaParser.BuildSource
    <target name="pre-build" depends="build-src">
	</target>
	-->

	<target name="post-build">
		<!-- There are no dependencies, so remove these JARs -->
		<delete file="${build.dir}/brownies-collections-only-deps.jar" />
		<delete file="${build.dir}/brownies-collections-with-all.jar" />
		<delete file="${build.dir}/brownies-collections-with-deps.jar" />
	</target>

	<!-- ==================== UNUSED ==================== -->
	<!--
	Example targets how to remove files from build

	<target name="build-doc">
       	<antcall target="build-doc-0.9.x" />
	</target>

	-->
	<target name="post-build-0.9.x">
	    <property name="tmp.bin.jar" value="${build.dir}/brownies-collections.jar" />
        <property name="tmp.bin.dir" value="${build.dir}/brownies-collections.jar.tmp" />
		<property name="skipFiles-0.9.x" value="**/Big*" />

		<unjar src="${tmp.bin.jar}" dest="${tmp.bin.dir}" />
		<delete>
			 <fileset dir="${tmp.bin.dir}" includes="${skipFiles-0.9.x}"/>
		</delete>
		<delete file="${tmp.bin.jar}" />
		<jar file="${tmp.bin.jar}" basedir="${tmp.bin.dir}" />
        <delete dir="${tmp.bin.dir}" />

        <property name="tmp.src.jar" value="${build.dir}/brownies-collections-sources.jar" />
        <property name="tmp.src.dir" value="${build.dir}/brownies-collections-sources.jar.tmp" />
        <unjar src="${tmp.src.jar}" dest="${tmp.src.dir}" />
        <delete>
             <fileset dir="${tmp.src.dir}" includes="${skipFiles-0.9.x}"/>
        </delete>
        <delete file="${tmp.src.jar}" />
        <jar file="${tmp.src.jar}" basedir="${tmp.src.dir}" />
        <delete dir="${tmp.src.dir}" />
	</target>

    <target name="build-doc-0.9.x" depends="prepare-doc">
        <delete dir="build/doc-src" />
	    <mkdir dir="build/doc-src" />
	   	<copy todir="build/doc-src">
	   	   <fileset dir="src" excludes="${skipFiles-0.9.x}" />
	   	</copy>
        <delete dir="${build.dir}/doc" />
            <javadoc
            	executable="${javadoc.executable}"
                access="public"
                author="true"
                destdir="${build.dir}/doc"
                doctitle="${lib.title}"
                nodeprecated="false"
                nodeprecatedlist="false"
                noindex="false"
                nonavbar="false"
                notree="false"
                packagenames="${lib.package}.*"
                source="1.6"
            	sourcepath="build/doc-src:${rt.src.dir}"
                splitindex="true"
                use="true"
                version="true">
                <classpath refid="lib.classpath" />
            </javadoc>
            <jar destfile="${build.dir}/${lib.name}-javadoc.jar">
                <fileset dir="${build.dir}/doc" />
            </jar>

    	<!--
	    <copy file="build/brownies-collections-javadoc.jar" tofile="D:\Java\Sources\Origo-Magicwerk\Brownies-Dev\build\snapshot\brownies-collections-20120724-javadoc.jar" />
	   	<copy file="build/brownies-collections-javadoc.jar" tofile="D:\Java\Sources\Origo-Magicwerk\Brownies-Dev\build\release\brownies-collections-0.9.1-javadoc.jar" />

	    <delete dir="D:\Java\Build\Origo-Magicwerk\Brownies-Collections\build\doc" />
        <copydir src="build/doc" dest="D:\Java\Build\Origo-Magicwerk\Brownies-Collections\build\doc" />
		-->
	</target>

</project>
